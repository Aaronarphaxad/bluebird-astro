---
interface Props {
	title: string;
	description: string;
	canonicalURL?: string;
	ogImage?: string;
	ogType?: 'website' | 'article';
	noindex?: boolean;
	nofollow?: boolean;
	twitterCard?: 'summary' | 'summary_large_image';
	keywords?: string;
	author?: string;
	publishedTime?: string;
	modifiedTime?: string;
	articleSection?: string;
	tags?: string[];
}

const {
	title,
	description,
	canonicalURL = Astro.url,
	ogImage = `${Astro.site || 'https://bluebirdweb.ca'}/og-image.jpg`,
	ogType = 'website',
	noindex = false,
	nofollow = false,
	twitterCard = 'summary_large_image',
	keywords,
	author = 'Bluebird',
	publishedTime,
	modifiedTime,
	articleSection,
	tags = [],
} = Astro.props;

const siteName = 'Bluebird';
const siteUrl = 'https://bluebirdweb.ca';
const fullTitle = title.includes(siteName) ? title : `${title} | ${siteName}`;
const fullOgImage = ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`;
const fullCanonicalURL = canonicalURL 
	? (canonicalURL instanceof URL ? canonicalURL.href : `${siteUrl}${canonicalURL}`)
	: Astro.url.href;

// Default keywords if not provided
const defaultKeywords = 'web development, website design, custom websites, web applications, e-commerce, UI/UX design, British Columbia, BC, Canada, conversion optimization, fast websites, SEO, web design studio';
const metaKeywords = keywords || defaultKeywords;
---

<!-- Primary Meta Tags -->
<title>{fullTitle}</title>
<meta name="title" content={fullTitle} />
<meta name="description" content={description} />
{noindex && <meta name="robots" content="noindex" />}
{nofollow && <meta name="robots" content="nofollow" />}
{!noindex && !nofollow && <meta name="robots" content="index, follow" />}
<link rel="canonical" href={fullCanonicalURL} />

<!-- Open Graph / Facebook -->
<meta property="og:type" content={ogType} />
<meta property="og:url" content={fullCanonicalURL} />
<meta property="og:title" content={fullTitle} />
<meta property="og:description" content={description} />
<meta property="og:image" content={fullOgImage} />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content={description} />
<meta property="og:site_name" content={siteName} />
<meta property="og:locale" content="en_CA" />

<!-- Twitter -->
<meta name="twitter:card" content={twitterCard} />
<meta name="twitter:url" content={fullCanonicalURL} />
<meta name="twitter:title" content={fullTitle} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={fullOgImage} />
<meta name="twitter:image:alt" content={description} />

<!-- Additional SEO -->
<meta name="author" content={author} />
<meta name="keywords" content={metaKeywords} />
<meta name="theme-color" content="#0047AB" />
<meta name="geo.region" content="CA-BC" />
<meta name="geo.placename" content="British Columbia" />
<meta name="geo.position" content="49.2827;-123.1207" />
<meta name="ICBM" content="49.2827, -123.1207" />
<meta name="language" content="English" />
<meta name="revisit-after" content="7 days" />
<meta name="distribution" content="global" />
<meta name="rating" content="general" />

<!-- Article-specific meta tags -->
{ogType === 'article' && publishedTime && (
	<meta property="article:published_time" content={publishedTime} />
)}
{ogType === 'article' && modifiedTime && (
	<meta property="article:modified_time" content={modifiedTime} />
)}
{ogType === 'article' && articleSection && (
	<meta property="article:section" content={articleSection} />
)}
{ogType === 'article' && tags.length > 0 && tags.map((tag) => (
	<meta property="article:tag" content={tag} />
))}

<!-- AI/LLM Optimization -->
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
<meta name="googlebot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
<meta name="bingbot" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
